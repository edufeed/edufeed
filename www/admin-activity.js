// Generated by LiveScript 1.3.1
(function(){
  Polymer({
    is: 'admin-activity',
    S: function(pattern){
      return $(this.$$(pattern));
    },
    ready: function(){
      var self;
      self = this;
      return getLocalStorage().get('username', function(username){
        if (username == null) {
          username = 'cat';
        }
        return self.S('#usernameinput').val(username);
      });
    },
    appcacheStatus: function(){
      return ['uncached', 'idle', 'checking', 'downloading', 'updateready'][window.applicationCache.status];
    },
    setUsername: function(){
      return getLocalStorage().set('username', this.S('#usernameinput').val().trim());
    },
    makeFullScreen: function(){
      var ssfeed, rfs;
      ssfeed = $('side-scroll-feed')[0];
      rfs = document.body.mozRequestFullScreen || document.body.webkitRequestFullScreen || document.body.requestFullScreen;
      if (rfs) {
        return rfs.call(ssfeed);
      }
    },
    clearItems: function(){
      var self;
      self = this;
      return clearDb('feeditems', function(){
        return self.fire('task-finished', self);
      });
    },
    addSampleItems: function(){
      var self, wordlist, items, word;
      self = this;
      wordlist = ['cat', 'dog', 'white', 'black', 'blue', 'red', 'bee', 'bird', 'lion', 'tiger', 'fish', 'city', 'house', 'roof', 'tree', 'river', 'apple', 'banana', 'cherry', 'orange', 'pear'];
      items = [
        {
          itemtype: 'admin',
          social: {
            poster: 'horse'
          }
        }, {
          itemtype: 'example',
          data: {
            foo: 'somefooval',
            bar: 'somebarval'
          },
          social: {
            poster: 'mouse',
            finishedby: ['elephant']
          }
        }
      ].concat((function(){
        var i$, ref$, len$, results$ = [];
        for (i$ = 0, len$ = (ref$ = wordlist).length; i$ < len$; ++i$) {
          word = ref$[i$];
          results$.push({
            itemtype: 'typeword',
            data: {
              word: word
            },
            social: {
              poster: 'dog',
              finishedby: ['zebra']
            }
          });
        }
        return results$;
      }()));
      return async.each(items, function(item, callback){
        return postItem('feeditems', item, callback);
      }, function(results){
        return self.fire('task-finished', self);
      });
    },
    addCustomItem: function(){
      var self, itemtype, data_text, data, social_text, social;
      self = this;
      itemtype = this.S('#itemtypeinput').val();
      if (itemtype == null || itemtype.length === 0) {
        alert('must specify itemtype');
        return;
      }
      data_text = this.S('#datainput').val();
      data = jsyaml.safeLoad(data_text);
      social_text = this.S('#socialinput').val();
      social = jsyaml.safeLoad(social_text);
      return postItem('feeditems', {
        itemtype: itemtype,
        data: data,
        social: social
      }, function(){
        return self.fire('task-finished', self);
      });
    }
  });
}).call(this);
